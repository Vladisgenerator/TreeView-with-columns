TreeView с колонками

Пример взят по ссылке http://sourceforge.net/projects/treeviewadv/

- Модификации подвергается только проект SampleApp.
- В библиотеке BusinessEntities описаны сущности объектов, для которых строится дерево. Все сущности наследуются от базового класса BaseComponent.
- Предполагается следующая структура: 
  • один корневой элемент (можно несколько)
  • в него вложены промежуточные и листовые элементы (любое количество)
  • в промежуточные могут быть вложены другие промежуточные, а также листовые (любое количество)

SampleApp:
- В FolderItems.cs описаны классы, представляющие объект в дереве: абстрактный класс BaseItem, а также классы RootItem для корневого узла, FolderItem для промежуточного и FileItem для листового.
  • В BaseItem объявлены свойства Name, Param1, Param2, которые будут отображаться на форме в отдельных столбцах компонента.
  • Свойство Tag должно содержать объект класса-наследника BaseComponent, по данному свойству определяются потомки текущего объекта.

- FolderItemSorter.cs содержит класс, отвечающий за сортировку по заданному параметру. Для корректной работы в методе Compare() необходимо указать правильное имя параметра, по которому выполняется сортировка, а также способ сортировки (соответствующие типы и сам код, выполняющий упорядочивание).

- FolderBrowserModel.cs содержит модель, определяющую поведение компонента при раскрытии/скрытии какого-либо из элементов дерева (т.е. нажатии кнопки "+" в определенной строке).
  • В методе ReadFilesProperties() из свойства Tag считываются параметры, которые должны быть выведены на форму в соответствующие столбцы. Здесь же загружается пиктограмма для каждого элемента.
  • Метод GetChildren() возвращает дочерние элементы для заданного текущего.

- В FolderBrowser.Designer.cs объявляются столбцы компонента, а также выполняется привязка данных
  • Столбцы и их атрибуты описаны в полях treeColumnX типа TreeColumn.
  • Привязка данных выполняется с помощью полей _name, _param1, _param2 типа NodeTextBox. 
  • this._param1.DataPropertyName = "Param1"; - данное свойство связывает столбец со свойством Param1 класса BaseItem.

Тестовое устройство объявлено в классе Program и инициализировано в методе Main(). При добавлении/изменении количества столбцов и типа отображаемой в них информации необходимо не забывать про соответствующее изменение типов данных.